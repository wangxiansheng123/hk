webpackJsonp([11],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),a=r(i),o=n(31);r(o);n(170),n(171),n(256);var u=n(257),l=document.getElementById("container");(0,o.render)(a.default.createElement(u.Prize,null),l)},170:function(e,t){"use strict";!function(e,t){var n=e.documentElement,r="orientationchange"in window?"orientationchange":"resize",i=function(){var e=document.querySelector("body").offsetWidth;e&&(n.style.fontSize=100*(e/750)+"px")};i(),e.addEventListener&&(t.addEventListener(r,i,!1),e.addEventListener("DOMContentLoaded",i,!1))}(document,window)},171:function(e,t){},177:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IsLoading=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l);n(178);var s=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),u(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"is-loading"},c.default.createElement("em",null),c.default.createElement("span",null,"加载中...."))}}]),t}(l.Component);t.IsLoading=s},178:171,180:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MaskLoading=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l);n(181);var s=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),u(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"mask-loading"},c.default.createElement("div",{className:"loading-mask"},c.default.createElement("i",null),"数据正在加载中..."))}}]),t}(l.Component);t.MaskLoading=s},181:171,183:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;var i=n(184),a=r(i),o="http://10.1.0.208:80",u=function(e){var t=a.default.Deferred(),n=function(e){t.resolve(e)},r=function(e){t.reject(e)};return e.url.indexOf("http://")>-1?(a.default.ajax({type:e.method,url:e.url,contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:e.params,success:function(e){var t=void 0;try{t=JSON.parse(e)}catch(n){t=e}n(t)},error:function(e){r(e)}}).done(function(e){var t=void 0;try{t=JSON.parse(e)}catch(n){t=e}n(t)}).fail(function(e){r(e)}),t):(a.default.ajax({type:e.method,url:o+e.url,contentType:"application/json;charset=UTF-8",data:e.params,success:function(e){var t=void 0;try{t=JSON.parse(e)}catch(n){t=e}n(t)},error:function(e){r(e)}}).done(function(e){var t=void 0;try{t=JSON.parse(e)}catch(n){t=e}n(t)}).fail(function(e){r(e)}),t)};t.Api=u},187:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckPhone=t.NoRepeat=t.FormatTime=t.Tip=t.isMobile=void 0;var i=n(184),a=r(i);t.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},AndroidApp:function(){return navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/Adr/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},iOSApp:function(){return navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Firefox:function(){return navigator.userAgent.indexOf("Firefox")>-1},QQ:function(){return navigator.userAgent.indexOf("QQ")>-1},WeChat:function(){var e=navigator.userAgent.match(/MicroMessenger/i);return e},AlipayChat:function(){var e=navigator.userAgent.match(/AlipayClient/i);return e&&store.remove("IS_APP"),e},APP:function(){var e=config.setting.is_app||store.get("IS_APP"),t=window.location.hash,n=window.location.search,r=n+t;return e?e:r.indexOf("platform=android")>-1?(store.set("IS_APP","android"),"android"):r.indexOf("platform=ios")>-1&&(store.set("IS_APP","ios"),"ios")},onlineApp:function(){return!(!this.APP()||window.cordova)},localApp:function(){return!!(this.APP()&&window.cordova&&window.sf)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()||this.Firefox()}},t.Tip=function(e,t){var n=(0,a.default)('<div class="dialog-cart"><div class="dialog-cart-inner"><span>'+e+"</span></div></div>");return!((0,a.default)(".dialog-cart").length>0)&&((0,a.default)(document.body).append(n),void setTimeout(function(){n.animate({opacity:0},300,function(){n.remove()})},t||"1500"))},t.FormatTime=function(e){e=new Date(parseInt(e));var t=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate(),i=e.getHours()<10?"0"+e.getHours():e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),o=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return t+"-"+n+"-"+r+" "+i+":"+a+":"+o},t.NoRepeat=function(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n])==-1&&t.push(e[n]);return t},t.CheckPhone=function(e){return/^1\d{10}$/.test(e)}},190:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerNativeFun=t.nativeFun=void 0;var i=n(187),a=n(191),o=r(a),u=function(e){var t=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)};i.isMobile.Android()?(e=JSON.stringify(e),JSInterface.nativeFunction(e)):i.isMobile.iOS()&&t(function(t){t.callHandler(e.funName,e.params,function(e){console.log("JS received response:",e)})})},l=function(e){var t=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)};i.isMobile.iOS()&&t(function(t){t.registerHandler(e.funName,function(e){var t=o.default.get("userId");e?t?t!=e.userId&&(o.default.remove("userId"),o.default.set("userId",e.userId),window.location.reload()):(o.default.set("userId",e.userId),window.location.reload()):t&&(o.default.remove("userId"),window.location.reload())})})};t.nativeFun=u,t.registerNativeFun=l},203:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUser=void 0;var i=n(184),a=r(i),o=n(191),u=r(o),l=function(){var e=a.default.fn.cookie("userId");if(e){var t={userId:e};return t}var n=u.default.get("userId");if(n){var r={userId:n};return r}};t.getUser=l},256:171,257:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Prize=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_loadingJsx=__webpack_require__(177),_maskloadingJsx=__webpack_require__(180),_api=__webpack_require__(183),_util=__webpack_require__(187),_getUser=__webpack_require__(203),_nativeFun=__webpack_require__(190),_zepto=__webpack_require__(184),_zepto2=_interopRequireDefault(_zepto),Prize=function(_Component){function Prize(e){_classCallCheck(this,Prize);var t=_possibleConstructorReturn(this,(Prize.__proto__||Object.getPrototypeOf(Prize)).call(this,e));return t.state={show:!0,dataShow:!1,coverShow:!1,prizeList:[],prizeId:null,prizeActivityId:null,information:[],index:null},t.user=(0,_getUser.getUser)(),t.cancel=t.cancel.bind(t),t.getPrize=t.getPrize.bind(t),t.goSubmit=t.goSubmit.bind(t),t}return _inherits(Prize,_Component),_createClass(Prize,[{key:"componentDidMount",value:function(){this.apiRequest(),this.title_fun()}},{key:"apiRequest",value:function(){var e=this,t={userId:this.user.userId},n={url:"/mobile-web-activity/ws/mobile/v1/activity/myprize",method:"post",params:JSON.stringify(t)};(0,_api.Api)(n).done(function(t){0==t.code?e.setState({show:!1,prizeList:t.response}):e.setState({show:!1},function(){(0,_util.Tip)(t.msg)})}).fail(function(t){e.setState({show:!1},function(){(0,_util.Tip)("服务器错误")})})}},{key:"title_fun",value:function(){var e={funName:"title_fun",params:{title:"我的奖品"}};(0,_nativeFun.nativeFun)(e)}},{key:"cancel",value:function(e){e.stopPropagation(),this.setState({coverShow:!1})}},{key:"getPrize",value:function(e,t,n,r){var i=this;return e.stopPropagation(),e.currentTarget.getAttribute("class").indexOf("p-active")<0?((0,_util.Tip)("已领取"),!1):void this.setState({dataShow:!0,prizeId:t,prizeActivityId:n,index:r},function(){var e={luckActiveId:n},t={url:"/mobile-web-activity/ws/mobile/v1/activity/getprizeInfo",method:"post",params:JSON.stringify(e)};(0,_api.Api)(t).done(function(e){0==e.code?i.setState({coverShow:!0,dataShow:!1,information:JSON.parse(e.response)}):i.setState({dataShow:!1},function(){(0,_util.Tip)(e.msg)})}).fail(function(e){i.setState({dataShow:!1},function(){(0,_util.Tip)("服务器错误")})})})}},{key:"goSubmit",value:function goSubmit(e){var _this4=this;e.stopPropagation();for(var _state=this.state,prizeId=_state.prizeId,prizeActivityId=_state.prizeActivityId,index=_state.index,element=document.getElementsByClassName("item"),info=[],i=0;i<element.length;i++){var childNode=element[i].children[1],Value=childNode.value,isChecked=eval(element[i].getAttribute("data-ischeck").toLowerCase()),key=void 0,value=void 0,infoItem={};if(isChecked){if(""==Value)return(0,_util.Tip)(element[i].children[0].innerHTML+"不能为空"),!1;key=element[i].children[0].innerHTML,value=Value}else key=element[i].children[0].innerHTML,value=Value;infoItem[key]=value,info.push(infoItem)}var data={luckActiveId:prizeActivityId,prizeId:prizeId,userId:this.user.userId,prizeInfo:JSON.stringify(info)},params={url:"/mobile-web-activity/ws/mobile/v1/activity/getprize",method:"post",params:JSON.stringify(data)};this.setState({coverShow:!1,dataShow:!0},function(){return _this4.clearValue()}),(0,_api.Api)(params).done(function(e){0==e.code&&_this4.setState({dataShow:!1},function(){(0,_util.Tip)("领奖成功</br>奖品即将发出"),(0,_zepto2.default)(".view-pc").find("li").eq(index).removeClass("p-active"),(0,_zepto2.default)(".view-pc").find("li").eq(index).find("p").html("已领取")})}).fail(function(e){console.log(e)})}},{key:"clearValue",value:function(){for(var e=document.getElementsByClassName("item"),t=0;t<e.length;t++)e[t].children[1].value=""}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.show,r=t.dataShow,i=t.coverShow,a=t.prizeList,o=t.information;return _react2.default.createElement("div",{className:"page"},n?null:_react2.default.createElement("div",{className:"page-content"},_react2.default.createElement("ul",{className:"view-pc"},a.map(function(t,n){return _react2.default.createElement("li",{className:2==t.status?"p-active":"",onClick:function(r){return e.getPrize(r,t.id,t.prizeActiveid,n)},key:n},_react2.default.createElement("img",{src:t.prizeImgUrl}),_react2.default.createElement("p",null,2==t.status?"领取":"已领取"))})),_react2.default.createElement("section",{className:"cmp-fixed"+(i?" cover-mask-toggle":""),onClick:function(t){return e.cancel(t)}}),_react2.default.createElement("div",{className:"popup"+(i?" popup-toggle":"")},_react2.default.createElement("div",{className:"popup-title"},_react2.default.createElement("h2",null,"填写领奖信息"),_react2.default.createElement("a",{href:"javascript: void (0)",onClick:function(t){return e.cancel(t)}},_react2.default.createElement("img",{src:__webpack_require__(258)}))),_react2.default.createElement("ul",{className:"info"},o.map(function(e,t){return _react2.default.createElement("li",{className:"item",key:t,"data-ischeck":e.ischecked},_react2.default.createElement("span",null,e.text),_react2.default.createElement("input",{type:"text"}))})),_react2.default.createElement("div",{className:"btn",onClick:function(t){return e.goSubmit(t)}},"提交"))),n?_react2.default.createElement(_loadingJsx.IsLoading,null):null,r?_react2.default.createElement(_maskloadingJsx.MaskLoading,null):null,0!=a.length||n?null:_react2.default.createElement("div",{className:"no-prize"},_react2.default.createElement("img",{src:__webpack_require__(259)})))}}]),Prize}(_react.Component);exports.Prize=Prize},258:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAA51BMVEVJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlxPpu/AAAATHRSTlMADxMUJicoKSorLS8wMTIzNDU2ODk6Ozw9PkBCQ0RFRkdISUpMTU9RUlNUVVdYWVpbtb7Q5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8o2CvZgAAAZ5JREFUOMuVlXd7gjAQxs+6N3WPuqu2jta9FQduvv/naS60VjFAwj8kl98DlxvvAdh7EnA8Uu8FwNZX5Yg1G5HVvg26qqrKUSs2JhOsC8U9ea0T5mxiTaB9EaCgkMUmacYmNwRRCrjMIr1NGbOpLbI5bZNBepcxYumxcjtO73CbZbP0x7u03qkci809O0mvqxSfWWaw4hjIQ0nPlg6YhrjeHEX6WH40lo8GKZNW5OBUvTe9n4hp9cq6SniJdO3fUEN2GWYHKbRAuv63rSO7CBmFPzBDuqFtPpGdBY0T658S4NLEZfNCllO/Wcn4kL62AFpXZH3mxegZI/39hezEa1Xm7hHSyI7c1g3kGqr0Gbp4WtOJfqszJw8LDgpPHVwfHmhuDDjcELmgFrpOB+mxx5z1TpBtA7RpoE2TIpJuWkjn30JqnDGAASM2OMei+3go0blBiYoUP6OtqrStJKamkoatPBor7IYVkYKbpnKIjCZfedZV8lSR7+QrveUXRp2mmkqupZhrP37DpciYEBpAdLTFrMo8ro02oaHJP47t8ANU5X8JHWxZFwAAAABJRU5ErkJggg=="},259:function(e,t,n){e.exports=n.p+"images/0f609e2d.no_prize.png"}});